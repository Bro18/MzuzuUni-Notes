<!-- notes.html -->
{% extends 'base.html' %}

{% block content %}
<div class="row">
    <div class="col-md-3">
        <div class="card fun-element mb-4">
            <div class="card-header bg-primary text-white">
                <h5>My Program</h5>
            </div>
            <div class="card-body">
                <p><strong>Program:</strong> {{ profile.program.name }}</p>
                <p><strong>Year:</strong> Year {{ profile.year_of_study }}</p>
                <p><strong>Semester:</strong> Semester {{ profile.semester }}</p>
                <a href="{% url 'update_profile' %}" class="btn btn-sm btn-outline-primary">Update</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-9">
        <h3 class="mb-4">Available Notes</h3>
        
        {% if notes %}
            {% for note in notes %}
            <div class="notes-container fun-element">
                <h5>{{ note.title }}</h5>
                <p class="text-muted">Course: {{ note.course.name }}</p>
                
                <div class="mt-3">
                    <a href="{{ note.pdf_file.url }}" class="btn btn-primary me-2" target="_blank">View PDF</a>
                    <button class="btn btn-outline-primary" data-bs-toggle="collapse" 
                            data-bs-target="#noteText{{ note.id }}">Show Text</button>
                </div>
                
                <div id="noteText{{ note.id }}" class="collapse mt-3">
                    <div class="card card-body">
                        {{ note.extracted_text|linebreaks }}
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="alert alert-info">
                No notes available for your current program, year and semester.
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}